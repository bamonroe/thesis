\documentclass[12pt,a4paper]{report}

\usepackage{subfiles}  % For compiling things into one big document from sub-documents

\usepackage[justification=centering]{caption}
\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage{geometry}
\usepackage[nodisplayskipstretch]{setspace}
\setstretch{1.5}
\usepackage[style = american]{csquotes}	% For quoting
\usepackage[hidelinks]{hyperref} %To make references into links
\usepackage{amsmath}	% For equation stuff
\usepackage{amssymb}	% For math symbols
\usepackage{amsthm}		% For theorem environments
\usepackage{relsize}	% To resize math symbols
\usepackage{bm}			% For Bold math Symbols
\usepackage{nicefrac}	% For nice looking fractions
\usepackage{graphicx}	% For Graphics
\usepackage[justification=centering]{subcaption} % For subcaptions to tables/figures
\usepackage[toc,titletoc,title]{appendix}        % For Appendix numbering
\usepackage[raggedright]{titlesec}
\usepackage{afterpage}

% Trying to fix footnot
\raggedbottom
\usepackage[bottom,stable]{footmisc}

%% FOR ABstract only%
%\usepackage{titling}

% Need to specfy path to figures for the graphicx package
\graphicspath{{ch1/figures/}{ch2/figures/}{ch3/figures/}{ch4/figures/}{figures/}}

% for changes
\usepackage[final]{changes}

% Stuff or code
\usepackage{listings}
\usepackage{color}
\lstset{frame=none,
  language=R,
  aboveskip=1mm,
  belowskip=1mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=none,
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3
}
\newsavebox{\LstBoxR}
\newsavebox{\LstBoxStata}


% Stuff for Tables
\usepackage{tabularx}
\newcolumntype{Y}{>{\centering\arraybackslash}X} % A centered column type that sucks up excess space
\usepackage{caption}
\usepackage{adjustbox}
\usepackage{booktabs}		% For \toprule, \midrule, and \bottomrule
\usepackage{pgfplotstable}	% Generates a table from a CSV
\pgfplotsset{compat=1.12}
\setlength{\extrarowheight}{.5em}
\usepackage{multirow}

\usepackage[stretch=15]{microtype}	% Read about this, tested it, and was sold.
\usepackage[american]{babel}
\usepackage[backend=biber, bibstyle=IEEEtran, uniquename=false, refsegment=chapter, doi=false, isbn=false, url=false, style=authoryear-comp, maxnames=99]{biblatex}	%For bibliography stuff
%\renewcommand*{\revsdnamepunct}{} 
\DefineBibliographyExtras{english}{\let\finalandcomma=\empty}
\renewbibmacro{in:}{}
\addbibresource{/home/bam/thesis/library.bib}	% The path to the bibliography file

% Deal with spacing between equations and text

% Convenience Commands
\newcommand\CE{\ensuremath{\mathit{CE}}}    % Certainty Equivalent
\newcommand\Prob{\ensuremath{\mathit{Pr}}}  % Probability
\newcommand{\E}{\operatorname{E}}           % Variance Operator
\newcommand{\Var}{\operatorname{Var}}       % Variance Operator
\newcommand\OB{\ensuremath{\succ^{\!*}}}    % Certainty Equivalent
\newcommand{\money}[1]{$\$\!\:#1$}          % Money command
\newcommand{\overbar}[1]{\mkern 1.5mu\overline{\mkern-1.5mu#1\mkern-1.5mu}\mkern 1.5mu} % Command to make a shorter overline/longer bar


% Make a break a column title into 2 lines
\newcommand{\cnline}[2][c]{%
	\setlength{\extrarowheight}{0em}
	\begin{tabular}[#1]{@{}c@{}}#2\end{tabular}
	\setlength{\extrarowheight}{5em}
}

% Table of contents only when locally compiled
\newcommand{\lltoc}[1]{
	\pagenumbering{gobble}
	\makeatletter
	\@starttoc{toc}%
	\makeatother
	\break
	\pagenumbering{arabic}
}
\newcommand{\llltoc}[1]{
	\makeatletter
	\@starttoc{toc}%
	\makeatother
}

% A fix for Chapter numbering with above
\let\oldchapter\chapter
\renewcommand{\chapter}[1]{
	\refstepcounter{chapter}% 
	\oldchapter*{{\huge Chapter \thechapter}\\[1em]#1}
}

% Commands that display text either in or out of subfile
\newcommand{\onlyinsubfile}[1]{#1}
\newcommand{\notinsubfile}[1]{}

\title{Stochastic Models in Experimental Economics}
\author{Brian Albert Monroe}

\begin{document}
% Set up the commands for when full document is compiled together
\renewcommand{\onlyinsubfile}[1]{}
\renewcommand{\notinsubfile}[1]{#1}
\renewcommand{\lltoc}[1]{}
\let\chapter\oldchapter

\pagenumbering{arabic}
\maketitle
\doublespacing
\tableofcontents

\subfile{ch1/ch1}
\subfile{ch2/ch2}
\subfile{ch3/ch3}
\subfile{ch4/ch4}
\subfile{ch5/ch5}

\printbibliography

\end{document}
