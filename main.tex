\documentclass[11pt,a4paper]{report}

\usepackage{subfiles}  % For compiling things into one big document from sub-documents

\usepackage[justification=centering]{caption}
\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage{geometry}
\usepackage{setspace}	% For line spacing
\usepackage{csquotes}	% For quoting
\usepackage[hidelinks]{hyperref} %To make references into links
\usepackage{amsmath}	% For equation stuff
\usepackage{amssymb}	% For math symbols
\usepackage{amsthm}		% For theorem environments
\usepackage{relsize}	% To resize math symbols
\usepackage{bm}			% For Bold math Symbols
\usepackage{nicefrac}	% For nice looking fractions
\usepackage{graphicx}	% For Graphics

% Stuff for Tables
\usepackage{caption}
\usepackage{adjustbox}
\usepackage{booktabs}		% For \toprule, \midrule, and \bottomrule
\usepackage{pgfplotstable}	% Generates a table from a CSV
\pgfplotsset{compat=1.12}
\setlength{\extrarowheight}{.5em}

\usepackage[stretch=15]{microtype}	% Read about this, tested it, and was sold.
\usepackage[backend=biber, refsegment=chapter, doi=false, isbn=false, url=false, style=authoryear-comp, maxnames=99]{biblatex}	%For bibliography stuff
\renewbibmacro{in:}{}
\addbibresource{~/Dropbox/Papers/library.bib}	% The path to the bibliography file

% Convenience Commands
\newcommand\CE{\ensuremath{\mathit{CE}}}  % Certainty Equivalent
\newcommand\Prob{\ensuremath{\mathit{Pr}}}  % Probability
\newcommand{\E}{\operatorname{E}}			% Variance Operator
\newcommand{\Var}{\operatorname{Var}}		% Variance Operator
\newcommand\OB{\ensuremath{\succ^{\!*}}}   % Certainty Equivalent


% Make a break a column title into 2 lines
\newcommand{\cnline}[2][c]{%
	\setlength{\extrarowheight}{0em}
	\begin{tabular}[#1]{@{}c@{}}#2\end{tabular}
	\setlength{\extrarowheight}{5em}
}

% Table of contents only when locally compiled
\newcommand{\lltoc}[1]{
	\pagenumbering{gobble}
	\makeatletter
	\@starttoc{toc}%
	\makeatother
	\break
	\pagenumbering{arabic}
}
\newcommand{\llltoc}[1]{
	\makeatletter
	\@starttoc{toc}%
	\makeatother
}

% A fix for Chapter numbering with above
\let\oldchapter\chapter
\renewcommand{\chapter}[1]{
	\refstepcounter{chapter}% 
	\oldchapter*{{\huge Chapter \thechapter}\\[1em]#1}
}

% Commands that display text either in or out of subfile
\newcommand{\onlyinsubfile}[1]{#1}
\newcommand{\notinsubfile}[1]{}


\title{This is my Thesis}
\author{Brian Albert Monroe}

\begin{document}
% Set up the commands for when full document is compiled together
\renewcommand{\onlyinsubfile}[1]{}
\renewcommand{\notinsubfile}[1]{#1}
\renewcommand{\lltoc}[1]{}
\let\chapter\oldchapter

\pagenumbering{arabic}
\maketitle
\onehalfspacing
\tableofcontents

\subfile{ch1/ch1}
\subfile{ch2/ch2}
\subfile{ch3/ch3}

\printbibliography

\end{document}
